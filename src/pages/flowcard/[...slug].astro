---
import { getCollection } from "astro:content";
import Layout from "../../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
// 1. ä¸ºæ¯ä¸ªé›†åˆæ¡ç›®ç”Ÿæˆä¸€ä¸ªæ–°è·¯å¾„
export async function getStaticPaths() {
    const blogEntries = await getCollection("hotcard");
    console.log("11111111", blogEntries);
    return blogEntries.map((entry) => ({
        params: {
            id: entry.id,
            slug: entry.slug,
            title: entry.data.title,
            desc: entry.data.description,
        },
        props: { entry },
    }));
}
// 2. å½“æ¸²æŸ“çš„æ—¶å€™ï¼Œä½ å¯ä»¥ç›´æ¥ä»å±æ€§ä¸­å¾—åˆ°æ¡ç›®
const { entry } = Astro.props;
const { id, title, desc } = Astro.params;
const { Content } = await entry.render();
const allPosts = await getCollection("hotcard");
---

<Layout pageTitle={title} desc={desc}>
    <div class="m-10">
        <Content />
        <div class="m-2 flex justify-evenly">
            <div class="scale-150">ğŸ¢ </div>
            <div class="scale-150">â¯</div>
        </div>
        <div class="bg-slate-100 shadow-xl p-5">
            <span class="text-xl mx-16">ä½ å¯èƒ½ä¹Ÿå–œæ¬¢ï¼š</span>
            <div class="grid mx-16">
                {
                    allPosts
                        .filter((item) => item.id !== id)
                        .map((p) => (
                            <a
                                class="hover:bg-blue-200"
                                href={`/flowcard${p.slug}`}
                            >
                                {p.data.title}
                            </a>
                        ))
                }
            </div>
        </div>
    </div>
</Layout>
