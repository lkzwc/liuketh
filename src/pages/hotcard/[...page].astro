---
import { getCollection } from "astro:content";
import Layout from "../../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
import shop from "../../content/hotcard/_image/cangjie.jpg";
import BlogList from "../../components/BlogList.astro";
import type { GetStaticPathsOptions } from "astro";
import Play from "../../components/Landing/Play";

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const hotcard = await getCollection("hotcard");
  return paginate(
    hotcard.sort(
      (a, b) =>
        new Date(b.data?.pubDate).getTime() -
        new Date(a.data?.pubDate).getTime()
    ),
    { pageSize: 12 }
  );
}

const { page } = Astro.props;
const hotcard = await getCollection("hotcard");
---

<Layout
  pageTitle="æµé‡å¡"
  desc="æµé‡å¡å®˜ç½‘ï¼Œæä¾›æµé‡å¡çš„ç”³è¯·ã€åŠç†ã€å……å€¼ã€å”®åç­‰åŠŸèƒ½"
>
  <div class="hidden md:flex gap-5 mx-5 m-10">
    <Play
      client:only="react"
      title="æµé‡å¡å®˜ç½‘"
      desc="æä¾›æµé‡å¡çš„ç”³è¯·åŠç†"
      data={page.data.map((item: any) => ({
        image: item.data.image.url?.src,
        url: `/hotcard/${item.slug}`,
      }))}
    />
  </div>
  <p slot="shop" class="w-full">
    <span>ğŸ›ï¸å…è´¹åŠå¡</span>
    <a href="http://tc.liuketh.cn" target="_blank">
      <Image
        src={shop}
        width={300}
        height={30}
        alt="19å…ƒ100ï¼§æµé‡å¡"
        class="rounded-md mt-3"
      />
    </a>
  </p>
  <!-- //client:load  -->
  <div>
    <BlogList path="/hotcard" page={page} />
  </div>
</Layout>
